<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <!-- Taken from http://bl.ocks.org/weiglemc/6185069 -->
    
    <!-- Example based on http://bl.ocks.org/mbostock/3887118 -->
    <!-- Tooltip example from http://www.d3noob.org/2013/01/adding-tooltips-to-d3js-graph.html -->
    <!-- Coding style based on http://gist.github.com/mbostock/5977197 -->

    <link rel="stylesheet" href="scatterplot.css">
</head>

<body>
    <svg id="canvas" width="800" height="500"></svg>
    <button onclick="sampleFromServer();">Sample</button>
    <button onclick="cluster();">Cluster</button>

    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="scatterplot.js"></script>

    <script>
        var svg = d3.select("#canvas");
                
        SP = {}
        d3.csv("cereal.csv", function(error, data) {
            // if the request failed, throw exception
            if (error) throw error;

            SP = ScatterplotVis(svg, data);
            SP.drawScatterplot();
        });

        // replace the data with a sample from the server
        function sampleFromServer() {
            d3.csv("/sample/10", function(error, data) {
                // if the request failed, throw exception
                if (error) throw error;

                SP.updateData(data); 
            }); 
        }

        function cluster() {
            d3.csv("/cluster", function(error, data) {
                // if the request failed, throw exception
                if (error) throw error;

                // data has as new set of data (with cluster var)
                SP.updateData(data);
                SP.changeColorVar("cluster");
            }); 
        }

    </script>
</body>
</html>